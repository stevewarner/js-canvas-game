!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);const s=document.getElementById("canvas"),h=s.getContext("2d"),o=(t,i,e,s,h)=>{let o=e-t,n=s-i,a=Math.atan2(n,o),r=a*(180/Math.PI);return"rad"===h?a:r},n=(t,i,e,s)=>{let h=e-t,o=s-i;return Math.sqrt(h*h+o*o)},a=(t,i)=>Math.random()*(i-t)+t,r=(t,i,e)=>t>=0&&t+e<=s.width&&i>=0&&i+e<=s.height;class d{constructor(t,i,e,s,h){this.x=t,this.y=i,this.radius=e,this.color=s,this.velocity=h}draw(){h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),h.fillStyle=this.color,h.fill()}update(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}isInBounds(){return r(this.x,this.y,this.radius)}}class l{constructor(t,i,e,s,h){this.x=t,this.y=i,this.radius=e,this.color=s,this.velocity=h,this.alpha=1}draw(){h.save(),h.globalAlpha=this.alpha,h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),h.fillStyle=this.color,h.fill(),h.restore()}update(){this.draw(),this.velocity.x*=.99,this.velocity.y*=.99,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}isInBounds(){return r(this.x,this.y,this.radius)}}class c{constructor(t,i,e,s){this.x=t,this.y=i,this.text=s,this.backgroundColor=e}draw(){h.font="20px Arial";const t=h.measureText(this.text).width;h.beginPath(),h.rect(this.x-t/2-20,this.y-20,t+40,30),h.fillStyle=this.backgroundColor,h.fill(),h.lineWidth=1,h.strokeStyle="black",h.stroke(),h.fillStyle="white",h.textAlign="center",h.baseLine="middle",h.fillText(this.text,this.x,this.y)}update(){this.draw()}}let u;/mobile/i.test(navigator.userAgent)&&!location.hash&&setTimeout((function(){window.scrollTo(0,1)}),1e3),s.focus();const y=()=>{const{clientWidth:t,clientHeight:i}=document.body;s.width=t,s.height=i,void 0!==u&&S(),(()=>{h.fillStyle="#000",h.fillRect(0,0,s.width,s.height),h.font="100px Arial",h.fillStyle="white",h.textAlign="center",h.baseLine="middle",h.fillText("Game Demo",s.width/2,s.height/2-80);const t=new c(s.width/2,s.height/2,"#333","Play Game");s.onmousedown=()=>{P(),A()},t.draw(),h.font="20px Arial",h.fillStyle="white",h.textAlign="center",h.baseLine="middle",h.fillText("WASD to move, mouse to aim, click or spacebar to shoot",s.width/2,s.height/2+80)})()};y(),addEventListener("resize",y);class f{constructor(t,i,e,s,h){this.x=t,this.y=i,this.width=e,this.height=s,this.color=h,this.velocity=0,this.aimX=this.x+16,this.aimY=this.y-16,this.aimAngle=o(this.x+this.width/2,this.y+this.height/2,this.aimX,this.aimY),this.aimAngleRad,this.isDead=!1,this.isShooting=!1,this.offsetX,this.offsetY}draw(){p.forEach(t=>{n(this.x+this.width/2,this.y+this.height/2,t.x+t.width/2,t.y+t.height/2)<=32&&S()}),h.beginPath(),h.lineWidth="1",h.strokeStyle=this.color,h.rect(this.x,this.y,this.width,this.height),h.stroke(),h.beginPath(),h.moveTo(this.x+this.width/2,this.y+this.height/2),h.lineTo(this.aimX,this.aimY),h.stroke()}move(t,i){const e=this.x,s=this.y;this.x+=t,this.y+=i,m.isInBounds()?this.update():(m.x=e,m.y=s)}update(){this.aimAngle=o(this.x+16,m.y+16,this.offsetX,this.offsetY),this.aimAngleRad=o(this.x+16,this.y+16,this.offsetX,this.offsetY,"rad"),this.aimX=this.x+16+32*Math.cos(Math.PI*this.aimAngle/180),this.aimY=this.y+16+32*Math.sin(Math.PI*this.aimAngle/180),this.isDead||this.draw()}isInBounds(){return r(this.x,this.y,this.width)}}class w{constructor(t,i,e){this.x=t,this.y=i,this.width=32,this.height=32,this.color="red",this.velocity={x:e.x,y:e.y}}draw(){h.beginPath(),h.lineWidth="1",h.rect(this.x,this.y,this.width,this.height),h.fillStyle=this.color,h.fill()}update(){const t=o(this.x,this.y,m.x,m.y,"rad");v.forEach((t,i)=>{if(n(this.x+this.width/2,this.y+this.height/2,t.x+t.radius,t.y+t.radius)<=32){for(let t=0;t<this.width;t++)b.push(new l(this.x+16,this.y+16,a(2,8),this.color,{x:(Math.random()-.5)*(8*Math.random()),y:(Math.random()-.5)*(8*Math.random())}));setTimeout(()=>{p.splice(p.indexOf(this),1),v.splice(i,1)},0),x.update()}}),this.velocity={x:Math.cos(t),y:Math.sin(t)},this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.draw()}isInBounds(){return r(this.x,this.y,this.width)}}let m=new f(s.width/2-16,s.height/2-16,32,32,"#fff");const x=new class{constructor(){this.score=0,this.x=20,this.y=40}draw(){h.textAlign="start",h.baseLine="top",h.font="20px Arial",h.fillStyle="white",h.fillText("Score: "+this.score,this.x,this.y)}update(){this.score++,this.draw()}reset(){this.score=0}};let g,p=[],v=[],b=[];const M=()=>{"hidden"===document.visibilityState&&k()},A=()=>{I(),requestAnimationFrame(D),window.addEventListener("gamepadconnected",(function(t){j(t,!0)}),!1),window.addEventListener("gamepaddisconnected",(function(t){j(t,!1)}),!1),window.addEventListener("visibilitychange",M),s.onmousemove=t=>{const{offsetX:i,offsetY:e}=t;m.offsetX=i,m.offsetY=e,m.update(m.aimX,m.aimY,m.aimAngle)},s.onmousedown=()=>{L()},s.onmouseup=()=>{m.isShooting=!1},window.addEventListener("keydown",X),window.addEventListener("keyup",X)},S=()=>{clearInterval(g),cancelAnimationFrame(u),window.removeEventListener("keydown",X),window.removeEventListener("visibilitychange",M),m.isDead=!0,h.fillStyle="#000",h.fillRect(0,0,s.width,s.height);const t=new c(s.width/2,s.height/2,"#333","Play again?");s.onmousedown=()=>{P(),A()},t.draw()},P=()=>{m.isDead=!1,p=[],v=[],b=[],x.reset(),m=new f(s.width/2-16,s.height/2-16,32,32,"#fff")},k=()=>{cancelAnimationFrame(u),m.isDead=!0,window.removeEventListener("keydown",X),clearInterval(g);const t=new c(s.width/2,s.height/2,"#333","Resume game?");s.onmousedown=()=>{E()},t.draw()},E=()=>{m.isDead=!1,window.addEventListener("keydown",X),I(),s.onmousedown=()=>{L()},u=requestAnimationFrame(D)},I=()=>{g=setInterval(()=>{const t=[{x:Math.random()*s.width,y:-32},{x:Math.random()*s.width,y:s.height+32},{x:s.width+32,y:Math.random()*s.height},{x:-32,y:Math.random()*s.height}][Math.floor(a(0,3))],i=t.x,e=t.y,h=o(i,e,m.x+16,m.y+16,"rad"),n={x:Math.cos(h),y:Math.sin(h)};p.push(new w(i,e,n))},3e3)},L=()=>{m.isShooting=!0;const t=o(m.x+16,m.y+16,m.offsetX,m.offsetY,"rad");v.push(new d(m.aimX,m.aimY,5,m.color,{x:20*Math.cos(t),y:20*Math.sin(t)}))},T={87:{pressed:!1,func:()=>m.move(0,-10)},65:{pressed:!1,func:()=>m.move(-10,0)},83:{pressed:!1,func:()=>m.move(0,10)},68:{pressed:!1,func:()=>m.move(10,0)},32:{pressed:!1,func:()=>L()},27:{pressed:!1,func:()=>k()}},X=t=>{t.preventDefault();const{keyCode:i,type:e}=t;T[i]&&(T[i].pressed="keydown"===e)};let Y=0;const D=t=>{t-Y<25?u=requestAnimationFrame(D):(Y=t,u=requestAnimationFrame(D),h.fillStyle="#000",h.fillRect(0,0,s.width,s.height),m.draw(),x.draw(),Object.keys(T).forEach(t=>{T[t].pressed&&T[t].func()}),p.forEach(t=>{t.update()}),v.forEach((t,i)=>{t.update(),t.isInBounds()||setTimeout(()=>{v.splice(i,1)},0)}),b.forEach((t,i)=>{t.alpha<=0?b.splice(i,1):t.update(),t.isInBounds()||setTimeout(()=>{b.splice(i,1)},0)}))},O={};function j(t,i){const e=t.gamepad;i?(console.log("gamepad connected!!!!"),O[e.index]=e):delete O[e.index]}}]);