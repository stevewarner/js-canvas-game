!function(t){var i={};function s(h){if(i[h])return i[h].exports;var e=i[h]={i:h,l:!1,exports:{}};return t[h].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,i,h){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)s.d(h,e,function(i){return t[i]}.bind(null,e));return h},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=0)}([function(t,i,s){"use strict";s.r(i);const h=(t,i,s,h,e)=>{let o=s-t,a=h-i,r=Math.atan2(a,o),n=r*(180/Math.PI);return"rad"===e?r:n},e=(t,i,s,h)=>{let e=s-t,o=h-i;return Math.sqrt(e*e+o*o)},o=(t,i)=>Math.random()*(i-t)+t,a=document.getElementById("canvas"),r=a.getContext("2d");let n;a.width=innerWidth,a.height=.75*innerWidth,a.focus();const l=(t,i,s)=>t>=0&&t+s<=a.width&&i>=0&&i+s<=a.height;class d{constructor(t,i,s){this.x=t,this.y=i,this.width=32,this.height=32,this.color="red",this.velocity={x:s.x,y:s.y}}draw(){r.beginPath(),r.lineWidth="1",r.rect(this.x,this.y,this.width,this.height),r.fillStyle=this.color,r.fill()}update(){const t=h(this.x,this.y,u.x,u.y,"rad");m.forEach((t,i)=>{if(e(this.x+this.width/2,this.y+this.height/2,t.x+t.radius,t.y+t.radius)<=32){for(let t=0;t<this.width;t++)w.push(new y(this.x+16,this.y+16,o(2,8),this.color,{x:(Math.random()-.5)*(8*Math.random()),y:(Math.random()-.5)*(8*Math.random())}));setTimeout(()=>{x.splice(x.indexOf(this),1),m.splice(i,1)},0),f.update()}}),this.velocity={x:Math.cos(t),y:Math.sin(t)},this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.draw()}isInBounds(){return l(this.x,this.y,this.width)}}class c{constructor(t,i,s,h,e){this.x=t,this.y=i,this.radius=s,this.color=h,this.velocity=e}draw(){r.beginPath(),r.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),r.fillStyle=this.color,r.fill()}update(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}isInBounds(){return l(this.x,this.y,this.radius)}}class y{constructor(t,i,s,h,e){this.x=t,this.y=i,this.radius=s,this.color=h,this.velocity=e,this.alpha=1}draw(){r.save(),r.globalAlpha=this.alpha,r.beginPath(),r.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),r.fillStyle=this.color,r.fill(),r.restore()}update(){this.draw(),this.velocity.x*=.99,this.velocity.y*=.99,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}isInBounds(){return l(this.x,this.y,this.radius)}}r.fillStyle="green",r.fillRect(10,10,150,100);const u=new class{constructor(t,i,s,e,o){this.x=t,this.y=i,this.width=s,this.height=e,this.color=o,this.velocity=0,this.aimX=this.x+16,this.aimY=this.y-16,this.aimAngle=h(this.x+this.width/2,this.y+this.height/2,this.aimX,this.aimY),this.aimAngleRad,this.isDead=!1,this.isShooting=!1,this.offsetX,this.offsetY}draw(){x.forEach(t=>{e(this.x+this.width/2,this.y+this.height/2,t.x+t.width/2,t.y+t.height/2)<=32&&g()}),r.beginPath(),r.lineWidth="1",r.strokeStyle=this.color,r.rect(this.x,this.y,this.width,this.height),r.stroke(),r.beginPath(),r.moveTo(this.x+this.width/2,this.y+this.height/2),r.lineTo(this.aimX,this.aimY),r.stroke()}update(){this.aimAngle=h(this.x+16,u.y+16,this.offsetX,this.offsetY),this.aimAngleRad=h(this.x+16,this.y+16,this.offsetX,this.offsetY,"rad"),this.aimX=this.x+16+32*Math.cos(Math.PI*this.aimAngle/180),this.aimY=this.y+16+32*Math.sin(Math.PI*this.aimAngle/180),this.isDead||this.draw()}isInBounds(){return l(this.x,this.y,this.width)}}(a.width/2-16,a.height/2-16,32,32,"#fff"),f=new class{constructor(){this.score=0,this.x=20,this.y=40}draw(){r.textAlign="start",r.baseLine="top",r.font="20px Arial",r.fillStyle="white",r.fillText("Score: "+this.score,this.x,this.y)}update(){this.score++,this.draw()}},x=[],m=[],w=[];let p;const g=()=>{clearInterval(p),cancelAnimationFrame(n),window.removeEventListener("keydown",b),u.isDead=!0,r.font="40px Arial",r.fillStyle="white",r.textAlign="center",r.baseLine="middle",r.fillText("GAME OVER",a.width/2,a.height/2)},v=()=>{u.isShooting=!0;const t=h(u.x+16,u.y+16,u.offsetX,u.offsetY,"rad");m.push(new c(u.aimX,u.aimY,5,u.color,{x:10*Math.cos(t),y:10*Math.sin(t)}))},M=()=>{n=requestAnimationFrame(M),r.fillStyle="#000",r.fillRect(0,0,a.width,a.height),u.draw(),f.draw(),x.forEach(t=>{t.update()}),m.forEach((t,i)=>{t.update(),t.isInBounds()||setTimeout(()=>{m.splice(i,1)},0)}),w.forEach((t,i)=>{t.alpha<=0?w.splice(i,1):t.update(),t.isInBounds()||setTimeout(()=>{w.splice(i,1)},0)})};a.onmousemove=t=>{const{offsetX:i,offsetY:s}=t;u.offsetX=i,u.offsetY=s,u.update(u.aimX,u.aimY,u.aimAngle)},a.onmousedown=()=>{v()},a.onmouseup=()=>{u.isShooting=!1};const b=t=>{t.preventDefault();const i=u.x,s=u.y,{keyCode:h}=t;switch(h){case 87:u.y-=10;break;case 65:u.x-=10;break;case 83:u.y+=10;break;case 68:u.x+=10;break;case 32:v()}u.isInBounds()||(u.x=i,u.y=s),u.update()};window.addEventListener("keydown",b),p=setInterval(()=>{const t=[{x:Math.random()*a.width,y:-32},{x:Math.random()*a.width,y:a.height+32},{x:a.width+32,y:Math.random()*a.height},{x:-32,y:Math.random()*a.height}][Math.floor(o(0,3))],i=t.x,s=t.y,e=h(i,s,u.x+16,u.y+16,"rad"),r={x:Math.cos(e),y:Math.sin(e)};x.push(new d(i,s,r))},1e3),M()}]);