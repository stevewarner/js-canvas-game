!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);const s=document.getElementById("canvas"),h=s.getContext("2d"),o=(t,i,e,s,h)=>{let o=e-t,n=s-i,a=Math.atan2(n,o),r=a*(180/Math.PI);return"rad"===h?a:r},n=(t,i,e,s)=>{let h=e-t,o=s-i;return Math.sqrt(h*h+o*o)},a=(t,i)=>Math.random()*(i-t)+t,r=(t,i,e)=>t>=0&&t+e<=s.width&&i>=0&&i+e<=s.height;class l{constructor(t,i,e,s,h){this.x=t,this.y=i,this.radius=e,this.color=s,this.velocity=h}draw(){h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),h.fillStyle=this.color,h.fill()}update(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}isInBounds(){return r(this.x,this.y,this.radius)}}class d{constructor(t,i,e,s,h){this.x=t,this.y=i,this.radius=e,this.color=s,this.velocity=h,this.alpha=1}draw(){h.save(),h.globalAlpha=this.alpha,h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),h.fillStyle=this.color,h.fill(),h.restore()}update(){this.draw(),this.velocity.x*=.99,this.velocity.y*=.99,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}isInBounds(){return r(this.x,this.y,this.radius)}}class c{constructor(t,i,e,s,h,o){this.x=t,this.y=i,this.width=e,this.height=s,this.text=o,this.backgroundColor=h}draw(){h.beginPath(),h.rect(this.x-this.width/2,this.y-this.height/2,this.width,this.height),h.fillStyle=this.backgroundColor,h.fill(),h.lineWidth=1,h.strokeStyle="black",h.stroke(),h.font="20px Arial",h.fillStyle="white",h.textAlign="center",h.baseLine="middle",h.fillText(this.text,this.x,this.y)}update(){this.draw()}}let u;/mobile/i.test(navigator.userAgent)&&!location.hash&&setTimeout((function(){window.scrollTo(0,1)}),1e3),s.focus();const y=()=>{const{clientWidth:t,clientHeight:i}=document.body;s.width=t,s.height=i,(()=>{h.fillStyle="#000",h.fillRect(0,0,s.width,s.height),h.font="100px Arial",h.fillStyle="white",h.textAlign="center",h.baseLine="middle",h.fillText("Game Demo",s.width/2,s.height/2-200);const t=new c(s.width/2,s.height/2,200,200,"blue","Play Game");s.onmousedown=()=>{S(),b()},t.draw()})()};y(),addEventListener("resize",y);class f{constructor(t,i,e){this.x=t,this.y=i,this.width=32,this.height=32,this.color="red",this.velocity={x:e.x,y:e.y}}draw(){h.beginPath(),h.lineWidth="1",h.rect(this.x,this.y,this.width,this.height),h.fillStyle=this.color,h.fill()}update(){const t=o(this.x,this.y,x.x,x.y,"rad");p.forEach((t,i)=>{if(n(this.x+this.width/2,this.y+this.height/2,t.x+t.radius,t.y+t.radius)<=32){for(let t=0;t<this.width;t++)v.push(new d(this.x+16,this.y+16,a(2,8),this.color,{x:(Math.random()-.5)*(8*Math.random()),y:(Math.random()-.5)*(8*Math.random())}));setTimeout(()=>{g.splice(g.indexOf(this),1),p.splice(i,1)},0),w.update()}}),this.velocity={x:Math.cos(t),y:Math.sin(t)},this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.draw()}isInBounds(){return r(this.x,this.y,this.width)}}const x=new class{constructor(t,i,e,s,h){this.x=t,this.y=i,this.width=e,this.height=s,this.color=h,this.velocity=0,this.aimX=this.x+16,this.aimY=this.y-16,this.aimAngle=o(this.x+this.width/2,this.y+this.height/2,this.aimX,this.aimY),this.aimAngleRad,this.isDead=!1,this.isShooting=!1,this.offsetX,this.offsetY}draw(){g.forEach(t=>{n(this.x+this.width/2,this.y+this.height/2,t.x+t.width/2,t.y+t.height/2)<=32&&M()}),h.beginPath(),h.lineWidth="1",h.strokeStyle=this.color,h.rect(this.x,this.y,this.width,this.height),h.stroke(),h.beginPath(),h.moveTo(this.x+this.width/2,this.y+this.height/2),h.lineTo(this.aimX,this.aimY),h.stroke()}update(){this.aimAngle=o(this.x+16,x.y+16,this.offsetX,this.offsetY),this.aimAngleRad=o(this.x+16,this.y+16,this.offsetX,this.offsetY,"rad"),this.aimX=this.x+16+32*Math.cos(Math.PI*this.aimAngle/180),this.aimY=this.y+16+32*Math.sin(Math.PI*this.aimAngle/180),this.isDead||this.draw()}isInBounds(){return r(this.x,this.y,this.width)}}(s.width/2-16,s.height/2-16,32,32,"#fff"),w=new class{constructor(){this.score=0,this.x=20,this.y=40}draw(){h.textAlign="start",h.baseLine="top",h.font="20px Arial",h.fillStyle="white",h.fillText("Score: "+this.score,this.x,this.y)}update(){this.score++,this.draw()}reset(){this.score=0}};let m,g=[],p=[],v=[];const b=()=>{P(),k(),window.addEventListener("gamepadconnected",(function(t){X(t,!0)}),!1),window.addEventListener("gamepaddisconnected",(function(t){X(t,!1)}),!1),s.onmousemove=t=>{const{offsetX:i,offsetY:e}=t;x.offsetX=i,x.offsetY=e,x.update(x.aimX,x.aimY,x.aimAngle)},s.onmousedown=()=>{A()},s.onmouseup=()=>{x.isShooting=!1},window.addEventListener("keydown",I)},M=()=>{clearInterval(m),cancelAnimationFrame(u),window.removeEventListener("keydown",I),x.isDead=!0;const t=new c(s.width/2,s.height/2,200,200,"blue","Play again?");s.onmousedown=()=>{S(),b()},t.draw()},S=()=>{x.isDead=!1,g=[],p=[],v=[],w.reset()},P=()=>{m=setInterval(()=>{const t=[{x:Math.random()*s.width,y:-32},{x:Math.random()*s.width,y:s.height+32},{x:s.width+32,y:Math.random()*s.height},{x:-32,y:Math.random()*s.height}][Math.floor(a(0,3))],i=t.x,e=t.y,h=o(i,e,x.x+16,x.y+16,"rad"),n={x:Math.cos(h),y:Math.sin(h)};g.push(new f(i,e,n))},1e3)},A=()=>{x.isShooting=!0;const t=o(x.x+16,x.y+16,x.offsetX,x.offsetY,"rad");p.push(new l(x.aimX,x.aimY,5,x.color,{x:10*Math.cos(t),y:10*Math.sin(t)}))},k=()=>{u=requestAnimationFrame(k),h.fillStyle="#000",h.fillRect(0,0,s.width,s.height),x.draw(),w.draw(),g.forEach(t=>{t.update()}),p.forEach((t,i)=>{t.update(),t.isInBounds()||setTimeout(()=>{p.splice(i,1)},0)}),v.forEach((t,i)=>{t.alpha<=0?v.splice(i,1):t.update(),t.isInBounds()||setTimeout(()=>{v.splice(i,1)},0)})},I=t=>{t.preventDefault();const i=x.x,e=x.y,{keyCode:s}=t;switch(s){case 87:x.y-=10;break;case 65:x.x-=10;break;case 83:x.y+=10;break;case 68:x.x+=10;break;case 32:A()}x.isInBounds()||(x.x=i,x.y=e),x.update()},T={};function X(t,i){const e=t.gamepad;i?(console.log("gamepad connected!!!!"),T[e.index]=e):delete T[e.index]}}]);